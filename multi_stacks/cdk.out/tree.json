{"version":"tree-0.1","tree":{"id":"App","path":"","children":{"SharedResourcesStack":{"id":"SharedResourcesStack","path":"SharedResourcesStack","children":{"RawDataUploadBucket":{"id":"RawDataUploadBucket","path":"SharedResourcesStack/RawDataUploadBucket","children":{"Resource":{"id":"Resource","path":"SharedResourcesStack/RawDataUploadBucket/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketName":"home-energy-coach-raw-data-upload","lifecycleConfiguration":{"rules":[{"expirationInDays":1,"status":"Enabled"}]},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.185.0"}},"Policy":{"id":"Policy","path":"SharedResourcesStack/RawDataUploadBucket/Policy","children":{"Resource":{"id":"Resource","path":"SharedResourcesStack/RawDataUploadBucket/Policy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"RawDataUploadBucketC283C0F1"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["RawDataUploadBucketC283C0F1","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["RawDataUploadBucketC283C0F1","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.185.0","metadata":[{"bucket":"*"}]}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"SharedResourcesStack/RawDataUploadBucket/AutoDeleteObjectsCustomResource","children":{"Default":{"id":"Default","path":"SharedResourcesStack/RawDataUploadBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.185.0","metadata":["*"]}},"Notifications":{"id":"Notifications","path":"SharedResourcesStack/RawDataUploadBucket/Notifications","children":{"Resource":{"id":"Resource","path":"SharedResourcesStack/RawDataUploadBucket/Notifications/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.185.0","metadata":[{"autoDeleteObjects":true,"bucketName":"*","lifecycleRules":[{}],"removalPolicy":"destroy"},{"addLifecycleRule":[{},"*","*"]}]}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"SharedResourcesStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","children":{"Staging":{"id":"Staging","path":"SharedResourcesStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.185.0"}},"Role":{"id":"Role","path":"SharedResourcesStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}},"Handler":{"id":"Handler","path":"SharedResourcesStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.185.0"}},"SnsTopicRawUpload":{"id":"SnsTopicRawUpload","path":"SharedResourcesStack/SnsTopicRawUpload","children":{"Resource":{"id":"Resource","path":"SharedResourcesStack/SnsTopicRawUpload/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"displayName":"Home Energy Coach SNS Topic","topicName":"home-energy-coach-raw-upload"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.185.0"}},"edi7709@gmail.com":{"id":"edi7709@gmail.com","path":"SharedResourcesStack/SnsTopicRawUpload/edi7709@gmail.com","children":{"Resource":{"id":"Resource","path":"SharedResourcesStack/SnsTopicRawUpload/edi7709@gmail.com/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Subscription","aws:cdk:cloudformation:props":{"endpoint":"edi7709@gmail.com","protocol":"email","topicArn":{"Ref":"SnsTopicRawUploadD6872FAD"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnSubscription","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Subscription","version":"2.185.0","metadata":[{"topic":"*","endpoint":"*","protocol":"email","filterPolicy":"*","filterPolicyWithMessageBody":"*","deadLetterQueue":"*"}]}},"Policy":{"id":"Policy","path":"SharedResourcesStack/SnsTopicRawUpload/Policy","children":{"Resource":{"id":"Resource","path":"SharedResourcesStack/SnsTopicRawUpload/Policy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::TopicPolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sns:Publish","Condition":{"ArnLike":{"aws:SourceArn":{"Fn::GetAtt":["RawDataUploadBucketC283C0F1","Arn"]}}},"Effect":"Allow","Principal":{"Service":"s3.amazonaws.com"},"Resource":{"Ref":"SnsTopicRawUploadD6872FAD"},"Sid":"0"}],"Version":"2012-10-17"},"topics":[{"Ref":"SnsTopicRawUploadD6872FAD"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopicPolicy","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_sns.TopicPolicy","version":"2.185.0","metadata":[{"topics":["*"]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.185.0","metadata":[{"displayName":"*","topicName":"*"}]}},"SnsTopicCalculatorSummary":{"id":"SnsTopicCalculatorSummary","path":"SharedResourcesStack/SnsTopicCalculatorSummary","children":{"Resource":{"id":"Resource","path":"SharedResourcesStack/SnsTopicCalculatorSummary/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"displayName":"Home Energy Coach SNS Topic for calculator summary","topicName":"home-energy-coach-calculator-summary"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.185.0"}},"edi7709@gmail.com":{"id":"edi7709@gmail.com","path":"SharedResourcesStack/SnsTopicCalculatorSummary/edi7709@gmail.com","children":{"Resource":{"id":"Resource","path":"SharedResourcesStack/SnsTopicCalculatorSummary/edi7709@gmail.com/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Subscription","aws:cdk:cloudformation:props":{"endpoint":"edi7709@gmail.com","protocol":"email","topicArn":{"Ref":"SnsTopicCalculatorSummaryDA8CC890"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnSubscription","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Subscription","version":"2.185.0","metadata":[{"topic":"*","endpoint":"*","protocol":"email","filterPolicy":"*","filterPolicyWithMessageBody":"*","deadLetterQueue":"*"}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.185.0","metadata":[{"displayName":"*","topicName":"*"}]}},"BucketNotificationsHandler050a0587b7544547bf325f094a3db834":{"id":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834","path":"SharedResourcesStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834","children":{"Role":{"id":"Role","path":"SharedResourcesStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role","children":{"ImportRole":{"id":"ImportRole","path":"SharedResourcesStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"SharedResourcesStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.185.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SharedResourcesStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"SharedResourcesStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"s3:PutBucketNotification","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36","roles":[{"Ref":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.185.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.185.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]}},"Resource":{"id":"Resource","path":"SharedResourcesStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"CalculatedEnergyTable":{"id":"CalculatedEnergyTable","path":"SharedResourcesStack/CalculatedEnergyTable","children":{"Resource":{"id":"Resource","path":"SharedResourcesStack/CalculatedEnergyTable/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"id","attributeType":"S"},{"attributeName":"date","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"id","keyType":"HASH"},{"attributeName":"date","keyType":"RANGE"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.185.0"}},"ScalingRole":{"id":"ScalingRole","path":"SharedResourcesStack/CalculatedEnergyTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":["*"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.185.0","metadata":[{"partitionKey":{"name":"*","type":"S"},"sortKey":{"name":"*","type":"S"},"billingMode":"PAY_PER_REQUEST","removalPolicy":"destroy"}]}},"CDKMetadata":{"id":"CDKMetadata","path":"SharedResourcesStack/CDKMetadata","children":{"Default":{"id":"Default","path":"SharedResourcesStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Exports":{"id":"Exports","path":"SharedResourcesStack/Exports","children":{"Output{\"Fn::GetAtt\":[\"RawDataUploadBucketC283C0F1\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"RawDataUploadBucketC283C0F1\",\"Arn\"]}","path":"SharedResourcesStack/Exports/Output{\"Fn::GetAtt\":[\"RawDataUploadBucketC283C0F1\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.185.0"}},"Output{\"Ref\":\"SnsTopicCalculatorSummaryDA8CC890\"}":{"id":"Output{\"Ref\":\"SnsTopicCalculatorSummaryDA8CC890\"}","path":"SharedResourcesStack/Exports/Output{\"Ref\":\"SnsTopicCalculatorSummaryDA8CC890\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.185.0"}},"Output{\"Ref\":\"CalculatedEnergyTable9A20EF08\"}":{"id":"Output{\"Ref\":\"CalculatedEnergyTable9A20EF08\"}","path":"SharedResourcesStack/Exports/Output{\"Ref\":\"CalculatedEnergyTable9A20EF08\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.185.0"}},"Output{\"Ref\":\"RawDataUploadBucketC283C0F1\"}":{"id":"Output{\"Ref\":\"RawDataUploadBucketC283C0F1\"}","path":"SharedResourcesStack/Exports/Output{\"Ref\":\"RawDataUploadBucketC283C0F1\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.185.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"SharedResourcesStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.185.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SharedResourcesStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.185.0"}},"DataPipelineStack":{"id":"DataPipelineStack","path":"DataPipelineStack","children":{"JsonTransformedBucket":{"id":"JsonTransformedBucket","path":"DataPipelineStack/JsonTransformedBucket","children":{"Resource":{"id":"Resource","path":"DataPipelineStack/JsonTransformedBucket/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketName":"home-energy-coach-json-transformed","versioningConfiguration":{"status":"Enabled"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.185.0"}},"Notifications":{"id":"Notifications","path":"DataPipelineStack/JsonTransformedBucket/Notifications","children":{"Resource":{"id":"Resource","path":"DataPipelineStack/JsonTransformedBucket/Notifications/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"AllowBucketNotificationsToDataPipelineStackCalculateAndNotifyLambdaFunctionE377753C":{"id":"AllowBucketNotificationsToDataPipelineStackCalculateAndNotifyLambdaFunctionE377753C","path":"DataPipelineStack/JsonTransformedBucket/AllowBucketNotificationsToDataPipelineStackCalculateAndNotifyLambdaFunctionE377753C","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CalculateAndNotifyLambdaFunction772F11E3","Arn"]},"principal":"s3.amazonaws.com","sourceAccount":"543982656680","sourceArn":{"Fn::GetAtt":["JsonTransformedBucket9982178F","Arn"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.185.0","metadata":[{"bucketName":"*","removalPolicy":"destroy","versioned":true}]}},"TransformToJsonLambdaFunction":{"id":"TransformToJsonLambdaFunction","path":"DataPipelineStack/TransformToJsonLambdaFunction","children":{"ServiceRole":{"id":"ServiceRole","path":"DataPipelineStack/TransformToJsonLambdaFunction/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"DataPipelineStack/TransformToJsonLambdaFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"DataPipelineStack/TransformToJsonLambdaFunction/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.185.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"DataPipelineStack/TransformToJsonLambdaFunction/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"DataPipelineStack/TransformToJsonLambdaFunction/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"SharedResourcesStack:ExportsOutputFnGetAttRawDataUploadBucketC283C0F1Arn622F0326"},{"Fn::Join":["",[{"Fn::ImportValue":"SharedResourcesStack:ExportsOutputFnGetAttRawDataUploadBucketC283C0F1Arn622F0326"},"/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["JsonTransformedBucket9982178F","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["JsonTransformedBucket9982178F","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"TransformToJsonLambdaFunctionServiceRoleDefaultPolicyDF8C4F57","roles":[{"Ref":"TransformToJsonLambdaFunctionServiceRoleDFB5FF5B"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.185.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.185.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]}},"Code":{"id":"Code","path":"DataPipelineStack/TransformToJsonLambdaFunction/Code","children":{"Stage":{"id":"Stage","path":"DataPipelineStack/TransformToJsonLambdaFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.185.0"}},"AssetBucket":{"id":"AssetBucket","path":"DataPipelineStack/TransformToJsonLambdaFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.185.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.185.0"}},"Resource":{"id":"Resource","path":"DataPipelineStack/TransformToJsonLambdaFunction/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-543982656680-eu-central-1","s3Key":"f6fbac7937132231ce9773c0d45a732be5afab36b768e3d95174e220e0ac04d2.zip"},"description":"Lambda function transforms CSV to JSON and saves to S3 bucket","environment":{"variables":{"TRANSFORMED_BUCKET":{"Ref":"JsonTransformedBucket9982178F"}}},"functionName":"transform-to-json","handler":"app.lambda_handler","role":{"Fn::GetAtt":["TransformToJsonLambdaFunctionServiceRoleDFB5FF5B","Arn"]},"runtime":"python3.13"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.185.0","metadata":[{"description":"*","environment":"*","functionName":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]}]}},"CalculateAndNotifyLambdaFunction":{"id":"CalculateAndNotifyLambdaFunction","path":"DataPipelineStack/CalculateAndNotifyLambdaFunction","children":{"ServiceRole":{"id":"ServiceRole","path":"DataPipelineStack/CalculateAndNotifyLambdaFunction/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"DataPipelineStack/CalculateAndNotifyLambdaFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"DataPipelineStack/CalculateAndNotifyLambdaFunction/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.185.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"DataPipelineStack/CalculateAndNotifyLambdaFunction/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"DataPipelineStack/CalculateAndNotifyLambdaFunction/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["JsonTransformedBucket9982178F","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["JsonTransformedBucket9982178F","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CalculateAndNotifyLambdaFunctionServiceRoleDefaultPolicy2BF574DD","roles":[{"Ref":"CalculateAndNotifyLambdaFunctionServiceRoleF7BEC80C"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.185.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.185.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]}},"Code":{"id":"Code","path":"DataPipelineStack/CalculateAndNotifyLambdaFunction/Code","children":{"Stage":{"id":"Stage","path":"DataPipelineStack/CalculateAndNotifyLambdaFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.185.0"}},"AssetBucket":{"id":"AssetBucket","path":"DataPipelineStack/CalculateAndNotifyLambdaFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.185.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.185.0"}},"Resource":{"id":"Resource","path":"DataPipelineStack/CalculateAndNotifyLambdaFunction/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-543982656680-eu-central-1","s3Key":"9f9ad8e7bc418fbb025cbfede3fa67cd4d6da2986b644ea1c10b433fcbf03dfd.zip"},"description":"Lambda function calculates total energy usage and sends a summary notification via SNS","environment":{"variables":{"SNS_TOPIC_CALCULATOR_SUMMARY":{"Fn::ImportValue":"SharedResourcesStack:ExportsOutputRefSnsTopicCalculatorSummaryDA8CC890D20B061A"},"CALCULATED_ENERGY_TABLE_NAME":{"Fn::ImportValue":"SharedResourcesStack:ExportsOutputRefCalculatedEnergyTable9A20EF08083288C4"}}},"functionName":"calculate-and-notify","handler":"app.lambda_handler","role":{"Fn::GetAtt":["CalculateAndNotifyLambdaFunctionServiceRoleF7BEC80C","Arn"]},"runtime":"python3.13"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.185.0","metadata":[{"description":"*","environment":"*","functionName":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]}},"BucketNotificationsHandler050a0587b7544547bf325f094a3db834":{"id":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834","path":"DataPipelineStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834","children":{"Role":{"id":"Role","path":"DataPipelineStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role","children":{"ImportRole":{"id":"ImportRole","path":"DataPipelineStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.185.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"DataPipelineStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.185.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"DataPipelineStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"DataPipelineStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"s3:PutBucketNotification","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36","roles":[{"Ref":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.185.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.185.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]}},"Resource":{"id":"Resource","path":"DataPipelineStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"RawDataLandingBucketName":{"id":"RawDataLandingBucketName","path":"DataPipelineStack/RawDataLandingBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.185.0"}},"JsonTransformedBucketName":{"id":"JsonTransformedBucketName","path":"DataPipelineStack/JsonTransformedBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.185.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"DataPipelineStack/CDKMetadata","children":{"Default":{"id":"Default","path":"DataPipelineStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.185.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"DataPipelineStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.185.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"DataPipelineStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.185.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.185.0"}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.185.0"}}}